<%- include('../../partials/header.ejs') %>
<section id="pg_article">
  <div class="container">
    <div class="list_articles">
      <div class="box">
        <div class="boxHeader">
          <h3>Artigos</h3>
          <a href="/admin/article/new">Criar novo</a>
        </div>
        <div class="boxBody">
          <ul>
            <% articles.map(article=>{ %>
            <li>
              <div style="min-width: 50%;"><%= article.title %></div>
              <div style="min-width: 10%;"><%= article.blog_category.title %></div>
              <div>
                <i class="far fa-edit" onclick="editArticle({id: <%= article.id %>})"></i>
                <i class="far fa-trash-alt" onclick="confirmDelete({id: <%= article.id %>})"></i>
              </div>
            </li>
            <% })%>
          </ul>
        </div>
      </div>
  </div>
</section>
<script>
  function confirmDelete(obj) {
    var exec = confirm('Deseja realmente este item?');
    if (exec == true) {
      window.location.href = `/admin/article/delete/${obj.id}`;
    }
  }

  function editArticle(obj){
    window.location.href = `/admin/article/edit/${obj.id}`;
  }
</script>
<%- include('../../partials/footer.ejs') %>
